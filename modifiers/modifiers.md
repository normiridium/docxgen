<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# modifiers

```go
import "docxgen/modifiers"
```

## Index

- [Constants](<#constants>)
- [Variables](<#variables>)
- [func Abbr\(s string\) string](<#Abbr>)
- [func Compact\(s string\) string](<#Compact>)
- [func ConcatFactory\(data map\[string\]any\) func\(base string, parts ...string\) string](<#ConcatFactory>)
- [func DateFormat\(val any, layout string\) string](<#DateFormat>)
- [func Declension\(v any, opts ...string\) string](<#Declension>)
- [func DefaultValue\(s, def string\) string](<#DefaultValue>)
- [func Filled\(val any, out string\) string](<#Filled>)
- [func MakePSplit\(fonts \*metrics.FontSet\) func\(text string, firstUnders, otherUnders, nLine any, extra ...any\) string](<#MakePSplit>)
- [func Money\(v any, opts ...string\) string](<#Money>)
- [func NewFuncMap\(opts Options\) template.FuncMap](<#NewFuncMap>)
- [func Nowrap\(s string\) string](<#Nowrap>)
- [func Numeral\(v any, opts ...string\) string](<#Numeral>)
- [func PadLeft\(v any, length int, char string\) string](<#PadLeft>)
- [func PadRight\(v any, length int, char string\) string](<#PadRight>)
- [func Plural\(v any, forms ...string\) string](<#Plural>)
- [func Postfix\(s, p string\) string](<#Postfix>)
- [func Prefix\(s, p string\) string](<#Prefix>)
- [func Replace\(s, old, new string\) string](<#Replace>)
- [func Roman\(v any\) string](<#Roman>)
- [func RuPhone\(s string, formats ...string\) string](<#RuPhone>)
- [func Sign\(v any\) string](<#Sign>)
- [func Truncate\(s string, n int, suffix string\) string](<#Truncate>)
- [func UniqPostfix\(s, p string\) string](<#UniqPostfix>)
- [func UniqPrefix\(s, p string\) string](<#UniqPrefix>)
- [func WordReverse\(s string\) string](<#WordReverse>)
- [func WrapModifier\(fn any, fixed int\) any](<#WrapModifier>)
- [type ModifierMeta](<#ModifierMeta>)
- [type Options](<#Options>)
- [type RawXML](<#RawXML>)
  - [func BarCode\(value string, opts ...string\) RawXML](<#BarCode>)
  - [func NewLine\(s string\) RawXML](<#NewLine>)
  - [func QrCode\(value string, opts ...string\) RawXML](<#QrCode>)


## Constants

<a name="TAB"></a>For Word to display the tab correctly, you need to close the previous text element. Therefore, with several tabs in a row, empty \<w:t\>\</w:t\> appear, but in Word they are still display correctly and look better than any other options.

```go
const (
    TAB     = "</w:t><w:tab/><w:t>"
    NEWLINE = "<w:br/>"
)
```

<a name="NBSP"></a>Non\-breaking spaces \(normal and narrow\)

```go
const (
    NBSP  = "\u00A0" // Normal Unbroken Space
    NNBSP = "\u202F" // Narrow continuous space
)
```

## Variables

<a name="BarCodeFunc"></a>

```go
var BarCodeFunc func(string, ...string) RawXML
```

<a name="NewLineInText"></a>

```go
var (
    // NewLineInText - Line wrap within a paragraph
    NewLineInText = "</w:t><w:br/><w:t>"
)
```

<a name="QrCodeFunc"></a>

```go
var QrCodeFunc func(string, ...string) RawXML
```

<a name="Abbr"></a>
## func Abbr

```go
func Abbr(s string) string
```

Abbr \- makes abbreviations, initials, and short words inseparable from the subsequent word. This prevents the breakage of "g.", "st.", "LLC", "I.", etc. at the ends of the lines.

Examples:

```
"г. Москва" → "г. Москва"
"И. И. Иванов" → "И. И. Иванов"
"ООО Центр" → "ООО Центр"
```

<a name="Compact"></a>
## func Compact

```go
func Compact(s string) string
```

Compact \- replaces all spaces with narrow non\-breaking spaces. Suitable for phones, document numbers, and spreadsheets.

Example:

```
{user_phone|compact} → "+7 (4912) 572-466"
```

<a name="ConcatFactory"></a>
## func ConcatFactory

```go
func ConcatFactory(data map[string]any) func(base string, parts ...string) string
```

ConcatFactory returns a concat function that glues a string with tags or text. The last parameter is always considered a separator.

Examples:

```
{own_org_name|concat:`own_org_address`:`position`:`department`:`, `}
→ "ООО Рога, Москва, Отдел продаж"

{abc_tag|concat:`не тег`:`def_tag`:` разделитель `}
→ "A разделитель не тег разделитель B"

{fio|concat:`prefix`:`postfix`:`, `}
→ "Иванов Иван Иванович, prefix, postfix"
```

<a name="DateFormat"></a>
## func DateFormat

```go
func DateFormat(val any, layout string) string
```

DateFormat \- Formats the date according to the Go pattern \(for example, "01/02/2006"\).

Examples:

```
{project.deadline|date_format:`02.01.2006`} → "01.03.2026"
{created_at|date_format:`02.01.2006 15:04`} → "14.10.2025 08:30"
```

<a name="Declension"></a>
## func Declension

```go
func Declension(v any, opts ...string) string
```

Declension — declenses the full name in the specified case and format, using petrovich\-go. If the line "Surname, First Name, Patronymic" comes, it makes an automatic declension. If a map\[string\]string comes with ready\-made forms, it selects the desired one.

Examples:

```
{user_fio|declension:`предложный`:`ф и о`} = "Иванову Ивану Ивановичу"
{user_fio|declension:`дательный`:`фамилия и.о.`} = "Сидорову И.П."
{user_fio|declension:`винительный`:`фамилия`} = "Петрова"
{user_fio|decl:`п`:`и.о. ф`} = "И.И. Сидорову"
```

<a name="DefaultValue"></a>
## func DefaultValue

```go
func DefaultValue(s, def string) string
```

DefaultValue \- Return the default value if the string is empty.

Example:

```
{position|default:`сотрудник`} → "сотрудник"
```

<a name="Filled"></a>
## func Filled

```go
func Filled(val any, out string) string
```

Filled — return the specified value if the string is not empty; otherwise it is empty.

Example:

```
{passport|filled:`—`} → "—"
```

<a name="MakePSplit"></a>
## func MakePSplit

```go
func MakePSplit(fonts *metrics.FontSet) func(text string, firstUnders, otherUnders, nLine any, extra ...any) string
```

MakePSplit is a p\_split modifier that implements line breaks like in office editors, But only in tables, where the text needs to be scattered evenly across the cells.

In the template, the designer puts lines of underscores with "\_" by hand. By their number, we find out how many characters will "fit" into the line. Next, a tag with a p\_split modifier is created instead of these underscores. When you write a modifier p\_split the number of underlines is specified in the parameters. The program itself will recalculate the number of underlines in pt based on the size of the text and style.

Algorithm: the text is divided into words and laid out into lines, so that the words do not break and each line fits into a given number of characters.

Parameters \(separated by a colon\):

\{tag|p\_split:\<indentCount\>:\<lineCount\>:\<nLine\>\[:\<style\>:\<fontSize\>\]\}

- indentCount — the number of underscores in the first line \(if there is a paragraph indent\); if there is no indent indent, indentCount = lineCount;
- lineCount — the number of underscores in all subsequent lines;
- nLine — the number of the line to be taken; if indicated with a plus \(for example, \+2\), all lines starting with this one are taken;
- style — \(optional\) font style: regular, bold, italic, bolditalic;
- fontSize—\(optional\) font size \(10, 12, 14, etc.\).

Examples:

```
{address|p_split:20:65:1}        → первая строка адреса (20 подчёркиваний, затем 65)
{address|p_split:20:65:2}        → вторая строка адреса
{address|p_split:20:65:+2}       → вторая и все последующие строки
{fio|p_split:15:60:1:`bold`:12}    → первая строка, жирный 12 pt
```

<a name="Money"></a>
## func Money

```go
func Money(v any, opts ...string) string
```

Money \- Formats a number as a monetary value separated by thousands of spaces. Supports the "int" / "целое" flag to hide the fractional part, as well as custom format via FMT template. Sprintf.

Examples:

```
{sum|money}                    → "1 234,56"
{sum|money:`int`}              → "1 234"
{sum|money:`целое`}            → "1 234"
{sum|money:`%s рублей`}        → "1 234 рублей"
{sum|money:`%s рублей %02d копеек`} → "1 234 рублей 56 копеек"
```

Если шаблон содержит только один плейсхолдер \(%s\), дробная часть будет опущена. Некорректный формат не вызывает паники — просто игнорируется.

<a name="NewFuncMap"></a>
## func NewFuncMap

```go
func NewFuncMap(opts Options) template.FuncMap
```

NewFuncMap returns a function map for Go templates. Plugs in the standard modifiers and drains the ExtraFuncs on top.

<a name="Nowrap"></a>
## func Nowrap

```go
func Nowrap(s string) string
```

Nowrap \- replaces all regular spaces with non\-breaking spaces. Used for short codes, zip codes, numbers.

Example:

```
{case_index|nowrap} → "Дело № 15"
```

<a name="Numeral"></a>
## func Numeral

```go
func Numeral(v any, opts ...string) string
```

Numeral is a numerical modifier with morphology \(gender, case, variant 8, variant zero\).

Examples:

```
{count|numeral} → "один"
{count|numeral:`предложный`} → "одном"
{count|numeral:`женский`:`предложный`} → "одной"
{count|numeral:`предложный`:`ноль`} → "ноле"
{count|numeral:`женский`:`творительный`:`восемью`:`нуль`} → "восемью"
{35147|numeral:`дательный`} → "тридцати пяти тысячам ста сорока семи"
```

<a name="PadLeft"></a>
## func PadLeft

```go
func PadLeft(v any, length int, char string) string
```

PadLeft \- Completes the string on the left with a character up to a specified length.

Example:

```
{num|pad_left:`5`:`0`} → "00042"
```

<a name="PadRight"></a>
## func PadRight

```go
func PadRight(v any, length int, char string) string
```

PadRight \- Completes the string on the right with a character up to a specified length.

Example:

```
{num|pad_right:`3`:`0`} → "420"
```

<a name="Plural"></a>
## func Plural

```go
func Plural(v any, forms ...string) string
```

Plural is the declension of nouns by number. v is a value \(a number or a string with a number\), forms — three forms of the word: \["employee", "employee", "employees"\].

Examples:

```
{count|plural:`день`:`дня`:`дней`}        → "дня"
{files|plural:`файл`:`файла`:`файлов`}   → "файлов"
{users|plural}                           → "сотрудников"
```

<a name="Postfix"></a>
## func Postfix

```go
func Postfix(s, p string) string
```

Postfix — add a postfix to the string if it is not empty.

Example:

```
{sum|postfix:` руб.`} → "100 руб."
```

<a name="Prefix"></a>
## func Prefix

```go
func Prefix(s, p string) string
```

Prefix \- Add a prefix to the string if it is not empty.

Example:

```
{fio|prefix:`гражданин `} → "гражданин Иванов Иван Иванович"
```

<a name="Replace"></a>
## func Replace

```go
func Replace(s, old, new string) string
```

Replace \- Replace all occurrences of the substring.

Example:

```
{address|replace:`Москва`:`Санкт-Петербург`}
```

<a name="Roman"></a>
## func Roman

```go
func Roman(v any) string
```

Roman \- Converts the number into Roman numerals.

Example:

```
{page|roman} → "XIV"
```

<a name="RuPhone"></a>
## func RuPhone

```go
func RuPhone(s string, formats ...string) string
```

RuPhone formats Russian phone numbers according to templates. If the number is not recognized, returns the original string.

Examples:

```
{user_phone|phone} → "+7 (4912) 572-466"
{user_phone|phone:`тел.: +7 ($2) $3-$4-$5`:`тел.: +7 ($2) $3-$4`}
```

Options:

- No parameters — the standard format is used;
- 1 parameter — template for a mobile phone;
- 2 parameters – template for mobile and regional phones.

<a name="Sign"></a>
## func Sign

```go
func Sign(v any) string
```

Sign \- Adds a "\+" sign to positive numbers.

Examples:

```
{delta|sign} → "+5"
{-3|sign} → "-3"
{0|sign} → "0"
```

<a name="Truncate"></a>
## func Truncate

```go
func Truncate(s string, n int, suffix string) string
```

Truncate \- Trim the string to n characters, add a tail if necessary \(e.g. "..."\).

Example:

```
{title|truncate:`20`:`…`} → "Очень длинное заг…"
```

<a name="UniqPostfix"></a>
## func UniqPostfix

```go
func UniqPostfix(s, p string) string
```

UniqPostfix — add a postfix only if the line is not empty and does not end with it yet.

Example:

```
{city|uniqpostfix:` г.`} → "Москва г."
```

<a name="UniqPrefix"></a>
## func UniqPrefix

```go
func UniqPrefix(s, p string) string
```

UniqPrefix \- add a prefix only if the string is not empty and does not start with it yet.

Example:

```
{org|uniqprefix:`ООО `} → "ООО Ромашка"
```

<a name="WordReverse"></a>
## func WordReverse

```go
func WordReverse(s string) string
```

WordReverse \- Changes the order of words in a string to reverse.

Examples:

```
{fio|word_reverse}
  "Фамилия Имя Отчество" → "Отчество Имя Фамилия"

{phrase|word_reverse}
  "раз два три четыре" → "четыре три два раз"
```

<a name="WrapModifier"></a>
## func WrapModifier

```go
func WrapModifier(fn any, fixed int) any
```

WrapModifier is a single wrapper for a modifier call. Parses arguments according to the DSL rule: the first "fixed" is fixed, the last is pipeline\-value, everything in between is "formats". Then calls the target function in the form:

fn\(value, fixed..., formats...\)

Supports variadics.

<a name="ModifierMeta"></a>
## type ModifierMeta



```go
type ModifierMeta struct {
    Func  any // target function (with a "beautiful" signature)
    Count int // how many FIRST arguments are considered fixed; pipeline-value is always the last
}
```

<a name="Options"></a>
## type Options

Options sets the parameters for building the FuncMap.

```go
type Options struct {
    // Fonts is a set of fonts for p_split. If nil, don't connect p_split.
    Fonts *metrics.FontSet
    // Data — template input data (needed for concat to be able to pick up other tags by name).
    Data map[string]any
    // ExtraFuncs are custom modifiers with a number of fixed parameters.
    // The behavior is completely similar to builtins.
    ExtraFuncs map[string]ModifierMeta
}
```

<a name="RawXML"></a>
## type RawXML

RawXML is a type for raw XML inserts that do not need to be escaped.

```go
type RawXML string
```

<a name="BarCode"></a>
### func BarCode

```go
func BarCode(value string, opts ...string) RawXML
```

BarCode \- Inserts a barcode at a preset value directly into the document.

Example of use:

\{product.code|barcode:\`code128\`:\`anchor\`:\`right\`:\`top\`:\`50mm\*15mm\`:\`10%\`:\`2/5\`:\`border\`\}

Format:

\{value|barcode:\[type\]:\[mode\]:\[align\]:\[valign\]:\[size\]:\[crop%\]:\[margins\]:\[border\]\}

Parameters \(all optional, the order is not important\):

- type—barcode type. Supported: "code128" \(default\), "ean13". If not specified, "code128" is used.

- mode — "anchor" \(default\) or "inline". "anchor" — floating placement relative to the text \(like an image\), "inline" is an inline line element.

- align — "left", "center", "right". Horizontal alignment for anchor mode \(default is "right"\).

- valign — "top", "middle", "bottom". Vertical alignment \(default "top"\). "middle" is automatically converted to "center".

\- size — barcode dimensions:

\- \<N\>"mm" – width \(height is calculated as 1/3 of the width, aspect ratio 3:1\);

\- "\<W\>mm\*\<H\>mm" — both sides are explicitly specified;

\- "\<N\>%" — width as a percentage of the page width;

\- \<W\>"%\*\<H\>mm" or vice versa \- combined sizes \(percent \+ millimeters\).

- \<N\>% – crop \(trimming the white margins around the barcode\). The value is set by the number of percentages \(0 by default\).

- margins — indents from the text \(for anchor mode\), millimeters. Formats: "5/5" — top/bottom = 5 mm, left/right = 5 mm; "5/3/5/3" \- top/right/bottom/left separately; "5/3/7" \- top, side, bottom.

\- border — a flag that adds a thin black border \(≈ 0.5 pt\) around the barcode.

Features:

\- Barcode scales proportionally or to specified sizes.

- Dimensions can be set as absolute \(mm\) or relative \(% of page\).
- "Inline" and "anchor" modes are supported, similar to a QR code.
- Cropping of white margins and setting of external paddings are supported.
- When used in pipelines \(e.g. \{code|compact|barcode\}\) The barcode gets a value after all the previous filters.

Returns:

An XML fragment \<w:drawing\> with an image of the barcode.

<a name="NewLine"></a>
### func NewLine

```go
func NewLine(s string) RawXML
```

NewLine — Add a hyphen to a line.

<a name="QrCode"></a>
### func QrCode

```go
func QrCode(value string, opts ...string) RawXML
```

QrCode — inserts a QR code at a specified value directly into the document.

Example of use:

\{project.code|qrcode:\`right\`:\`top\`:\`8%\`:\`5/5\`:\`border\`\}

Format:

\{value|qrcode:\[mode\]:\[align\]:\[valign\]:\[crop%\]:\[margins\]:\[border\]\}

Parameters \(all optional, the order is not important\):

- mode — "anchor" \(default\) or "inline" Insertion mode: floating \(anchor\) or embedded in text \(inline\).

- align — "left", "center", "right" Horizontal alignment for anchor mode \(default is "right"\).

- valign — "top", "middle", "bottom" Vertical alignment \(default "top"\). "middle" is a synonym for "center".

\- \<N\>mm—QR code size in millimeters \(32 mm by default\).

\- \<N\>% – crop \(crop the white margins around the QR code\), 4% by default.

- margins — indents from the text, in millimeters. Formats: "5/5" — top/bottom = 5 mm, left/right = 5 mm; "5/3/5/3" \- top/right/bottom/left separately; "5/3/7" \- top, side, bottom.

\- border — a flag that adds a thin black border \(≈ 0.5 pt\) around the QR code.

Returns:

Inserted XML fragment \<w:drawing\> with the generated QR image.

Compatible with Microsoft Word, LibreOffice, OnlyOffice.

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
